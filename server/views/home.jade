extends layout

block content
	.span3.bs-docs-sidebar
		ul.nav.nav-list.bs-docs-sidenav
			each cat in categories
				if cat.forums.length
					li.category-nav
						a(href="/category/" + cat.slug+"/")
							i.icon-chevron-right
							| !{cat.name}

					each forum in cat.forums
						li.forum-nav
							a(href="/forum/" + forum.slug+"/")
								i.icon-chevron-right
								span.sidenav-badge= forum.unRead
								| !{forum.name}

	.span9.home-categories.xforum
		for cat in categories
			if cat.forums.length
				.home-category
					.row(id = 'cat-' + cat.slug).display-head
						a(href= '/category/'+ cat.slug+'/').display-title #{cat.name}

					.row.display-headings
						.span9
							.span1 Status
							.span4 Forum
							.span1 Topics
							.span2 Last Post

					section.home-category-forums
						each forum in cat.forums
							if forum.parent == null
								.row.display-row(id = 'forum-' + forum._id)
									.span9
										.span1.forum-read-status
											if forum.isRead
												i.icon-folder-open
											else
												i.icon-folder-close

										.span4
											a(href = '/forum/'+ forum.slug +'/') #{forum.name}
											p.help-block.display-subtitle= forum.desc

										.span1.home-category-num-topics= forum.topics.length

										.span2.topic-last-post
											if(forum.lastPostTopic)
												abbr.timeago.home-category-last-post-time(title = forum.lastPostTopic.lastPost)= forum.lastPostTopic.lastPost
												br
												b In:&nbsp;
												a(href = '/topic/'+ forum.lastPostTopic.slug +'/#post-'+ forum.lastPostTopic.replies[0]._id).home-category-last-post-link
													span.home-category-last-post-topic= forum.lastPostTopic.title
												br
												b By:&nbsp;
												span.home-category-last-post-author= forum.lastPostTopic.replies[0].author.username

block append footer-scripts
	script(src='/js/views/home.js')
	script(src='/js/controllers/homeController.js')